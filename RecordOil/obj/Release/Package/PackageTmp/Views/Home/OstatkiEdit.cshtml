@using Microsoft.AspNet.Identity
@using System.Security.Principal
@model RecordOil.Models.OstatSklad

<div class="modal-header" style="text-align: center; background-color: #D0EDFE; border-radius:5px;">
    <h5><b> Редактирование остатков</b></h5>
</div>
<div class="modal-body">

    @*<label>ID записи</label>*@
    <input type="hidden" class="form-control btn-block" id="ID" value="@Model.IdOstSklad" />

    <table class="table">
        <tr>
            <td>
                <label>Дата остатка</label>
            </td>

            <td>
                &nbsp;&nbsp;
            </td>

            <td>
                <label>Склад</label>
            </td>
        </tr>

        <tr>
            <td>                
                <input type="date" class="form-control btn-block" id="DOstEdit" />
                <script>

                    var str = "@Model.Date";
                    console.log(str);

                    var day = str.substr(0, 2);
                    console.log(day);

                    var month = str.substr(3, 2);
                    console.log(month);

                    var year = str.substr(6, 4);
                    console.log(year);

                    var strDate = year + "-" + month + "-" + day
                    console.log(strDate);


                    document.getElementById("DOstEdit").value = strDate;

                </script>
            </td>

            <td>
                &nbsp;&nbsp;
            </td>

            <td>
                @*<input type="text" readonly class="form-control btn-block" id="" value="@Model.Sklad.Name" />*@                           
                <select class="form-control btn-block" contenteditable="true" id="idSkladE">

                    @foreach (var sk in ViewBag.LSO)
                    {
                        if (sk.IdSklad == @Model.IdSkl)
                        {
                            <option value="@sk.IdSklad" selected> @sk.Name</option>
                        }
                        else
                        {
                            <option value="@sk.IdSklad"> @sk.Name</option>
                        }
                    }
                </select>
            </td>

        </tr>               

        <tr>
            <td>
                <label>Объём, м3</label>
            </td>
            <td>
                &nbsp;&nbsp;
            </td>
            <td>
                <label>Примечание</label>
            </td>
        </tr>

        <tr>
            <td>
                <input type="text" class="form-control btn-block" id="MassaOstatEdit" value="@Math.Round(Convert.ToDouble(Model.Massa),0)" onkeyup="this.value = this.value.replace(/[^(0-9)()]/,'');"/>
            </td>
            <td>
                &nbsp;&nbsp;
            </td>
            <td>
                <input type="text" class="form-control btn-block" id="PrimOstatEdit" value="@Model.Primech" />
            </td>
        </tr>
    </table>

    <input type="hidden" class="form-control btn-block" id="UserOstEdit" value="@User.Identity.GetUserName()" />
    <input type="hidden" class="form-control btn-block" id="DateOstEdit" value="@DateTime.Now" />
</div>
<div class="modal-footer" style="text-align:center">
    <button type="submit" class="btn btn-default" style="min-width:100px" onclick="OstatkiEditSave(0)">Сохранить</button>
    <button type="button" class="btn btn-info" data-dismiss="modal" style="min-width:100px">Отмена</button>
</div>








